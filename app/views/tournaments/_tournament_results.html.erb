<table class="shadow-lg bg-white">
  <thead>
  <tr>
    <th class="bg-blue-100 border text-center px-3 py-2">Место</th>
    <th class="bg-blue-100 border text-center px-2">Команда</th>
    <th class="bg-blue-100 border text-center px-2">Состав</th>
    <th class="bg-blue-100 border text-center px-2">Взятые</th>
    <th class="bg-blue-100 border text-center px-2">Рейтинг</th>
    <th class="bg-blue-100 border text-center px-2">Прогноз</th>
    <th class="bg-blue-100 border text-center px-1">D1</th>
    <th class="bg-blue-100 border text-center px-1">D2</th>
  </tr>
  </thead>

  <tbody>
  <% @tournament.results.each do |result| %>
    <tr class="border py-2 hover:bg-gray-100">
      <td class="border px-2 text-center">
        <%= render partial: "shared/place_change", locals: { place: result.place, previous_place: result.predicted_place } %>
      </td>
      <td class="border px-2 hover:underline">
        <%= link_to(result['team_name'], team_path(team_id: result.team_id)) %>
      </td>
      <td class="border px-2 py-2 text-left" data-controller="single-roster">
        <a href="" data-all-rosters-target="toggle" data-single-roster-target="toggle" data-action="single-roster#toggle" class="hover:underline text-sm">Показать</a>
        <div class="hidden" data-all-rosters-target="roster" data-single-roster-target="roster">
          <%= render partial: "shared/roster", collection: result.players, as: :player %>
        </div>
      </td>
      <td class="border px-2 text-center"><%= result.points %></td>
      <td class="px-2 text-center border">
        <%= result.rating %>
        <% unless result.in_rating %>
          <s>
        <% end %>
        <%= render partial: "shared/value_change", locals: { change: result.rating_change } %>
        <% unless result.in_rating %>
          </s>
        <% end %>
      </td>
      <td class="border px-2 text-center"><%= result.predicted_rating %></td>
      <td class="border px-1 text-center"><%= result.d1 %></td>
      <td class="border px-1 text-center"><%= result.d2 %></td>
    </tr>
  <% end %>
  </tbody>
</table>
